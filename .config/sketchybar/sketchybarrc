PLUGINDIR="~/.config/sketchybar/plugins"
sketchybar --bar position=top height=24 color=0x9015191e blur_radius=15 \
                 border_color=0xfff2d2d4 border_width=1 \
                 margin=10 y_offset=10 corner_radius=9
sketchybar --default icon.font="Hack Nerd Font:Bold:14.0" \
    background.height=21 \
    background.padding_left=4 \
    background.padding_right=4 \
    label.color=0xfff2d2d4 \
    icon.color=0xfff2d2d4

sketchybar --add item clock right \
    --set clock script="$PLUGINDIR/clock.sh" \
                update_freq=10

sketchybar --add item battery right \
    --set battery script="$PLUGINDIR/battery.sh" \
                  update_freq=60

sketchybar --add event windowFlagChanged

sketchybar --add item windowFlag right \
    --set windowFlag script="$PLUGINDIR/windowFlag.sh" \
    --subscribe windowFlag windowFlagChanged

sketchybar --add event spotify_change "com.spotify.client.PlaybackStateChanged"

sketchybar --add item spotifyNext q \
    --set spotifyNext label="󰒭" \
                      click_script="osascript -e 'tell application \"Spotify\" to next track'"

sketchybar --add item spotifyPlayPause q \
    --set spotifyPlayPause script="$PLUGINDIR/spotifyPlayPause.sh" \
                          click_script="osascript -e 'tell application \"Spotify\" to playpause'" \
                          update_freq=60 \
    --subscribe spotifyPlayPause spotify_change

sketchybar --add item spotifyIndicator q \
    --set spotifyIndicator script="$PLUGINDIR/spotifyIndicator.sh" \
                          click_script="$PLUGINDIR/spotifyShowHide.sh" \
                          update_freq=60 \
    --subscribe spotifyIndicator spotify_change

sketchybar --add item spotifyShowHide q \
    --set spotifyShowHide label="" \
                          drawing=off \
                          click_script="$PLUGINDIR/spotifyShowHide.sh"

sketchybar --add event calendarLoaded
sketchybar --add event reloadCalendar

sketchybar --add item reloadCal e\
    --set reloadCal label="󰑓" \
                  click_script="sketchybar -m --trigger reloadCalendar"

sketchybar --add item calEvent1 e \
    --set calEvent1 script="$PLUGINDIR/calendar.sh 0" \
                  click_script="sketchybar -m --set \$NAME popup.drawing=toggle" \
                  update_freq=3600 \
                  popup.y_offset=-24 \
                  popup.height=22 \
                  popup.background.color=0xb8000000 \
                  popup.background.border_width=1 \
                  popup.background.border_color=0xfff2d2d4 \
                  popup.background.corner_radius=9 \
    --subscribe calEvent1 reloadCalendar

calSubitem=(
  update_freq=0
  background.padding_right=5
)


sketchybar --add item cal1Clone popup.calEvent1 \
    --set cal1Clone script="$PLUGINDIR/calendar.sh 1" \
                    "${calSubitem[@]}" \
                    click_script="sketchybar -m --set calEvent1 popup.drawing=toggle" \
    --subscribe cal1Clone calendarLoaded
sketchybar --add item calEvent2 popup.calEvent1 \
    --set calEvent2 script="$PLUGINDIR/calendar.sh 2" \
                    "${calSubitem[@]}" \
    --subscribe calEvent2 calendarLoaded
sketchybar --add item calEvent3 popup.calEvent1 \
    --set calEvent3 script="$PLUGINDIR/calendar.sh 3" \
                    "${calSubitem[@]}" \
    --subscribe calEvent3 calendarLoaded
sketchybar --add item calEvent4 popup.calEvent1 \
    --set calEvent4 script="$PLUGINDIR/calendar.sh 4" \
                    "${calSubitem[@]}" \
    --subscribe calEvent4 calendarLoaded
sketchybar --add item calEvent5 popup.calEvent1 \
    --set calEvent5 script="$PLUGINDIR/calendar.sh 5" \
                    "${calSubitem[@]}" \
    --subscribe calEvent5 calendarLoaded

sketchybar --add item clipboardReset left \
    --set clipboardReset label="" \
                         click_script="pbpaste | pbcopy"

sketchybar --update

# vim: ft=sh
# vim: shiftwidth=4
